<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R in the aiR! at useR! 2021</title>
    <meta charset="utf-8" />
    <meta name="author" content="Adithi R. Upadhya, Geospatial Data Analyst" />
    <meta name="date" content="2021-06-08" />
    <script src="libs/header-attrs-2.7/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/useR.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/useR-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# R in the aiR! at useR! 2021
### Adithi R. Upadhya, Geospatial Data Analyst
### ILK Labs
### 2021-06-08

---



# Hello!

My name is Adithi, and I am a Geospatial Data Analyst at ILK Labs in Bangalore, India. This is my first useR! I use R to analyse air quality data. Today, I will present about how I use R and shiny to build tools to provide a workflow to analyse air quality data.


---

# R in the aiR!

&lt;img src="WWW/R.png" width="100px" /&gt;

- R is a powerful tool in analysing air-quality data. 
- With the ever-increasing global measurements of air pollutants (through stationary, mobile, low-cost, and satellite monitoring), the amount of data being collected is huge and necessitates the use of management platforms. 
- In an effort to address this issue, I developed two Shiny applications to analyse and visualise air-quality data.

---
class: center

# Mobile Monitoring 

![MM_paper](WWW/MM.png)

.center[Apte et. al(2017)]

???

The shiny app which we are presenting helps visualising air pollution data collected on a moving platform and helps in getting high resolution data. So we take sensors in a car, and do repeat measurements of each road in an area to generate stable high resolution air pollutant maps. When multiple rides are possible, there is superior performance in estimating long-term mean concentrations when multiple repeated drives are possible.


---

# mmaqshiny
&lt;img src="WWW/mmaqshiny.png" width="100px" /&gt;

- Handles high frequency data (1 Hz)

- Pre-processes for various instrumental sensitivities

- Joins output files from different instruments

- Generates high resolution pollutant map

- Reduces computational labour



???
The first package is mmaqshiyny. This app can handle data of the order 18k every day from each of the instrument. The app reduces the time consumed for analysing each pollutant individually. This application helps in visualising the data collected on field each day. Each pollutant or sensor data requires some kind of preprocessing which depends on the principle on which it operates or its mechanical setup. This really helps us in achieving one objective of our study. This app has reduced computational labour upto 3 times. GPS data mandatory but other files not necessary.


---

# Necessity is the mother of Invention 

- App deployed

- No programming knowledge required

- One click to visualise all pollutants

- Near real time quality check of the data

- Visualise air pollution hot spots

- Alarms user on instrumental errors

- Adding new instrument is smooth

???

Before the app was developed each pollutant data collected from the app was put into the file locations and an automated process would join the files that is - GPS and PM2.5 and Black carbon to one single file. This process would require a huge amount of time because of an iterative process usually hours.
This application builds the file for each day  in less than a minute, (instead of hours) along with it we can also save the plots for future use.
The app allows team members to easily access data from the storage location and visualise the data in near-real time, without requiring knowledge in R. 
It helps check the quality of the data at near real time and instantly visualise pollution hot spots.

---
class: center

# Stationary Monitoring 

&lt;img src="WWW/SM.png" width="200px" /&gt;

.center[CSTEP, Bangalore, India]

---

# pollucheck
&lt;img src="WWW/PolluCheck.png" width="100px" /&gt;

- The sources compatible with the package are - [CPCB (specific to India)](https://app.cpcbccr.com/ccr/#/caaqm-dashboard-all/caaqm-landing), [OpenAQ](https://openaq.org/#/countries/IN?_k=5ecycz), and
[AirNow](https://www.airnow.gov/international/us-embassies-and-consulates/#India).

- Aims at generating a suite of statistical plots and summary statistics with several data cleaning options.

- Checks for normality, generates density, Q-Q plot along with checks for trends in the time series for the selected parameter.

- Implements linear or multilinear regression using the selected parameters.

- Allows users to upload another set of data to compare selected parameters and generate plots.

- Pre-loaded dataset available to work around the app without any dataset. 

---

## Thank you and to know more

Email me at - [adithi@ilklabs.com](adithi@ilklabs.com)

Find me on github - [@adithirgis](https://github.com/adithirgis)

Follow me on twitter - [@AdithiUpadhya](https://twitter.com/AdithiUpadhya)




---

# R packages 

- Shiny!! 

- Tidying the data: tidyverse

- Manipulating timestamps: lubridate

- Joining the file using mutating joins


???
Manipulating different timestamp formats has been the most challenging part and integrating a number of instruments has also been tough. 
Joining all file together to make a single file also saves a lot of time for future analysis. The csv produced here is the primary product for further analysis. 
Tidyverse, I guess is a must in all data analysis. 
But I do have to make a point; adding any other new instrument is pretty smooth.




    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"includePresenterNotes": true,
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
